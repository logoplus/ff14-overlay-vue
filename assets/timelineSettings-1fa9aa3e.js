import{d as ge,A as B,B as be,o as T,b as O,a as i,w as o,u as t,a3 as ue,I as b,t as P,g as p,h as ee,H as te,J as U,K as L,ai as y,aj as de,N as he,ak as De,O as Oe,P as ve,al as Ue,ag as Fe,ah as Te,af as xe,a4 as Ce,am as Pe,c as A,ae as Ie,a1 as ye,an as Re,D as _e,a0 as je,i as X,Y as ze,ao as we,j as Je,ap as qe,a7 as Me,aq as Le,ar as We,k as He,e as Ke,p as Qe,l as Ye,M as Ze,as as Ge}from"./vendor-5d3cd767.js";import{u as Se,p as Xe,_ as et}from"./TimelineShow-6e3acbae.js";import{U as R}from"./util-4b7cb3a6.js";import{g as tt}from"./actionChinese-ddfbd0ad.js";import{s as nt,h as it}from"./xivapi-7138c80f.js";import{_ as $e,r as lt}from"./index-b002a104.js";import{c as ot}from"./overlay_plugin_api-409cb9ea.js";import{z as ce}from"./zoneInfo-4a9ca0cf.js";const d=new Map;d.set(26155,{type:"cast",window:[999,999]});d.set(28027,{type:"cast",window:[999,999]});d.set(26340,{type:"cast",window:[999,999]});d.set(25533,{type:"begincast",window:[60,60]});d.set(26376,{type:"cast",window:[999,999]});d.set(26814,{type:"begincast",window:[999,999]});d.set(25313,{type:"begincast",window:[200,200]});d.set(27526,{type:"begincast",window:[999,999]});d.set(26215,{type:"cast",window:[500,30]});d.set(29050,{type:"begincast",window:[200,30]});d.set(29156,{type:"cast",window:[20,20]});d.set(27973,{type:"cast",window:[20,20]});d.set(27937,{type:"begincast",window:[20,20]});d.set(28059,{type:"begincast",window:[20,20]});d.set(28060,{type:"begincast",window:[20,20]});d.set(28061,{type:"begincast",window:[20,20]});d.set(27956,{type:"begincast",window:[20,20]});d.set(27957,{type:"begincast",window:[20,20]});d.set(27952,{type:"begincast",window:[30,30]});d.set(27969,{type:"begincast",window:[20,20]});d.set(27971,{type:"begincast",window:[20,20]});d.set(27939,{type:"begincast",window:[20,20]});d.set(27966,{type:"begincast",window:[20,20]});d.set(25316,{type:"begincast",window:[999,999]});d.set(25544,{type:"begincast",window:[10,10]});d.set(26379,{type:"begincast",window:[10,10]});d.set(31552,{type:"begincast",window:[30,30]});d.set(31573,{type:"begincast",window:[30,30]});d.set(31573,{type:"begincast",window:[30,30]});d.set(31617,{type:"begincast",window:[8,8]});d.set(31624,{type:"begincast",window:[30,30]});d.set(31649,{type:"begincast",window:[30,30]});d.set(18864,{type:"cast",window:[10,2.5],once:!0});d.set(18480,{type:"cast",window:[200,60],once:!0});d.set(18516,{type:"cast",window:[250,65],once:!0});d.set(18522,{type:"begincast",window:[500,500],once:!0});d.set(18552,{type:"begincast",window:[67,67],once:!0});d.set(18553,{type:"cast",window:[67,67],once:!0});d.set(19083,{type:"cast",window:[900,0],once:!0});function st(S){const F=new Map;S.filter(s=>s.type==="begincast").map(s=>F.set(s.actionId,(F.get(s.actionId)??0)+1));for(const s of S){F.get(s.actionId)===1&&s.type==="begincast"&&(s.window=[12,12]);const _=d.get(s.actionId);(_==null?void 0:_.type)===s.type&&(s.window=_==null?void 0:_.window),s.syncOnce=!!(_!=null&&_.once)}return S}const at={class:"fflogs-query-result-friendlies"},rt=["src","onerror"],dt=ge({__name:"FflogsImport",props:{filters:{}},emits:["newTimeline","showFFlogsToggle","clearCurrentlyTimeline","updateFilters"],setup(S,{emit:F}){const s=S,_=F,W=new RegExp("(?<=^|\\/)(?<code>\\w{16,})\\/?#fight=(?<fight>\\d+|last)"),j={begincast:"14",cast:"1[56]"},x=B("查询"),N=B(""),m=B(!1),e=be({});J();const $=Se();function z(C){var f;y.fire({text:"正在解析数据 (步骤1/3)",showConfirmButton:!1}),J(),x.value="正在请求";const c=C.match(W);$.settings.api?c?c?(e.code=((f=c.groups)==null?void 0:f.code)??"",de.get(`https://cn.fflogs.com/v1/report/fights/${e.code}?api_key=${$.settings.api}`).then(w=>{var h,v;e.bossIDs=w.data.enemies.filter(a=>a.type==="Boss").map(a=>a.id),e.fightIndex=(((h=c==null?void 0:c.groups)==null?void 0:h.fight)==="last"?w.data.fights.length:Number.parseInt(((v=c==null?void 0:c.groups)==null?void 0:v.fight)??"0"))-1;const u=w.data.fights[e.fightIndex];e.zoneID=u.zoneID,e.start=u.start_time,e.end=u.end_time,e.friendlies=w.data.friendlies.filter(a=>a.icon!=="LimitBreak"&&a.fights.find(D=>D.id===e.fightIndex+1)),x.value="查询",e.abilityFilterEvents.length=0,e.abilityFilterCandidate.length=0,y.fire("在列表中选择一名玩家")}).catch(w=>{y.fire({icon:"error",title:"Oops...(步骤1)",text:w}),x.value="查询"})):(y.fire({icon:"error",title:"url链接格式错误",footer:`验证规则：${W.toString().replaceAll(/\?<\w+>/g,"")}`}),x.value="查询"):(y.fire({icon:"error",title:"FF logs 战斗记录链接 未填写",footer:"例如：aaAAAAaAAAaAaa11#fight=18"}),x.value="查询"):(y.fire({icon:"error",title:"FF logs API Key 未填写",footer:'<a href="https://cn.fflogs.com/profile">点击这里，在最下方起名，然后获得你的V1 Client Key</a>'}),x.value="查询")}async function ne(C){e.player=C,await ie().then(()=>{e.abilityFilterCandidate=e.abilityFilterEvents.reduce((c,f)=>(f.sourceIsFriendly&&!c.find(w=>w.actionId===f.actionId)&&c.push(f),c),[])}).catch(c=>{y.fire({icon:"error",title:"Oops...(步骤2)",text:c})})}async function ie(){y.fire({text:"正在解析数据，请耐心等待。(步骤2/3)",showConfirmButton:!1});const C=[];e.abilityFilterEvents.length=0;async function c(h){var v;await de.get(`https://cn.fflogs.com/v1/report/events/casts/${e.code}?start=${h}&end=${e.end}&hostility=0&sourceid=${(v=e.player)==null?void 0:v.id}&api_key=${$.settings.api}`).then(async a=>{C.push(...a.data.events),a.data.nextPageTimestamp&&a.data.nextPageTimestamp>0&&a.data.nextPageTimestamp<e.end&&await c(a.data.nextPageTimestamp)}).catch(a=>{y.fire({icon:"error",title:"Oops...(步骤3.1)",text:a})})}async function f(h,v){v>=0&&await de.get(`https://cn.fflogs.com/v1/report/events/casts/${e.code}?start=${h}&end=${e.end}&hostility=1&sourceid=${e.bossIDs[v]}&api_key=${$.settings.api}`).then(async a=>{C.push(...a.data.events),a.data.nextPageTimestamp&&a.data.nextPageTimestamp>0&&a.data.nextPageTimestamp<e.end&&await f(a.data.nextPageTimestamp,v),v<e.bossIDs.length-1&&await f(h,v+1)}).catch(a=>{y.fire({icon:"error",title:"Oops...(步骤3.2)",text:a})})}const w=await c(e.start),u=await f(e.start,0);await Promise.all([w,u]).then(()=>{var h,v;for(const a of C)a.type==="begincast"&&a.sourceIsFriendly||e.abilityFilterEvents.push({time:Number(((a.timestamp-e.start)/1e3).toFixed(1)),type:a.type,actionName:tt(a.ability.guid)??a.ability.name,actionId:a.ability.guid,sourceIsFriendly:a.sourceIsFriendly,url:((h=a==null?void 0:a.ability)==null?void 0:h.abilityIcon.replace("-","/").replace(".png",""))??"000000/000405",window:void 0});(v=e.player)!=null&&v.icon&&s.filters[e.player.icon]&&(e.abilityFilterSelected=s.filters[e.player.icon]),y.fire("请在技能过滤器中选择需要的技能")})}function le(){var C,c,f,w;y.fire({text:"正在解析数据 (步骤3/3)",showConfirmButton:!1}),(C=e.player)!=null&&C.icon&&_("updateFilters",(c=e.player)==null?void 0:c.icon,JSON.parse(JSON.stringify(e.abilityFilterSelected))),e.abilityFilterEvents=e.abilityFilterEvents.filter(u=>u.sourceIsFriendly&&e.abilityFilterSelected.includes(u.actionId)||!u.sourceIsFriendly).sort((u,h)=>u.time-h.time),e.abilityFilterEvents=st(e.abilityFilterEvents),e.abilityFilterEventsAfterFilterRawTimeline=e.abilityFilterEvents.map(u=>u.sourceIsFriendly?`${u.time} "<${u.actionName}>~"${m.value?` tts "${u.actionName}"`:""}`:/^(?:攻击|attack|攻撃)$|^unknown/i.test(u.actionName)||u.type==="cast"&&u.window===void 0?`# ${u.time} "${u.actionName}"`:`${u.time} "${u.actionName}" sync /^.{14} \\w+ ${j[u.type]}:4.{7}:[^:]+:${u.actionId.toString(16).toUpperCase()}:/${u.window?` window ${u.window.join(",")}`:""}`).join(`
`),_("newTimeline",`导入${(f=e.player)==null?void 0:f.name}`,{zoneId:e.zoneID.toString(),job:((w=e.player)==null?void 0:w.icon)??"NONE"},e.abilityFilterEventsAfterFilterRawTimeline,`${e.code}#fight=${e.fightIndex+1}`),J(),_("showFFlogsToggle"),y.fire({position:"top-end",icon:"success",title:"已生成新时间轴",showConfirmButton:!1,timer:1500})}function J(){e.code="",e.fightIndex=0,e.start=0,e.end=0,e.friendlies=[],e.abilityFilterEvents=[],e.abilityFilterCandidate=[],e.abilityFilterSelected=[],e.abilityFilterEventsAfterFilterRawTimeline="",e.player=void 0,e.zoneID=0,e.bossIDs=[]}return(C,c)=>{const f=he,w=De,u=Oe,h=ve,v=Ue,a=Fe,D=Te,H=xe,oe=Ie,se=Ce,K=Pe;return T(),O(U,null,[i(v,{inline:!0,class:"fflogs-query"},{default:o(()=>[i(w,{label:"FF logs 战斗",style:{width:"450px"}},{default:o(()=>[i(f,{modelValue:t(N),"onUpdate:modelValue":c[0]||(c[0]=l=>ue(N)?N.value=l:null),placeholder:"reports/AAAaAaAAaa1aA1aA#fight=3",autocomplete:"on"},null,8,["modelValue"])]),_:1}),i(w,{label:"FF logs V1 Key",style:{width:"450px"}},{default:o(()=>[i(f,{modelValue:t($).settings.api,"onUpdate:modelValue":c[1]||(c[1]=l=>t($).settings.api=l)},null,8,["modelValue"])]),_:1}),i(w,{label:"添加TTS",style:{width:"100px"}},{default:o(()=>[i(u,{modelValue:t(m),"onUpdate:modelValue":c[2]||(c[2]=l=>ue(m)?m.value=l:null)},null,8,["modelValue"])]),_:1}),i(w,null,{default:o(()=>[i(h,{disabled:t(x)==="正在请求",type:"primary",onClick:c[3]||(c[3]=l=>z(t(N)))},{default:o(()=>[b(P(t(x)),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),p("div",at,[i(H,null,{default:o(()=>[ee(i(D,{data:t(e).friendlies.filter(l=>l.icon!=="NPC"),stripe:"",border:"",class:"fflogs-query-result-friendlies-list"},{default:o(()=>[i(a,{prop:"name",label:"玩家名称","min-width":"60px"}),i(a,{prop:"server",label:"服务器","min-width":"60px"}),i(a,{label:"职业","min-width":"60px"},{default:o(({row:l})=>[b(P(t(R).nameToFullName(t(R).jobEnumToJob(t(R).iconToJobEnum(l.icon))).cn),1)]),_:1}),i(a,{label:"选定","min-width":"20px"},{default:o(l=>[i(h,{type:"primary",size:"small",onClick:n=>ne(l.row)},{default:o(()=>[b(" 选择 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),[[te,t(e).abilityFilterEvents.length===0]])]),_:1}),ee(i(H,{class:"fflogs-query-result-friendlies-ability-filter-select"},{default:o(()=>[i(K,{span:20},{default:o(()=>[i(se,{modelValue:t(e).abilityFilterSelected,"onUpdate:modelValue":c[4]||(c[4]=l=>t(e).abilityFilterSelected=l),multiple:"",placeholder:"技能过滤器","fit-input-width":!0},{default:o(()=>[(T(!0),O(U,null,L(t(e).abilityFilterCandidate,l=>(T(),A(oe,{key:l.actionId,class:"ability-filter-li",value:l.actionId,label:l.actionName},{default:o(()=>[p("img",{src:`${t(nt).first}/i/${l.url}.png`,class:"ability-filter-li-icon",title:"",onerror:t(it)},null,8,rt),b(P(l.actionName),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(K,{span:4},{default:o(()=>[i(h,{type:"success",onClick:c[5]||(c[5]=l=>le())},{default:o(()=>[b(" 选择好了 ")]),_:1})]),_:1})]),_:1},512),[[te,t(e).abilityFilterEvents.length>0]])])],64)}}});const ct=$e(dt,[["__scopeId","data-v-30e0af75"]]),V=S=>(Qe("data-v-9b35a0df"),S=S(),Ye(),S),ut=V(()=>p("br",null,null,-1)),mt=V(()=>p("br",null,null,-1)),pt={class:"slider-demo-block"},ft=V(()=>p("span",null,"模拟时间：",-1)),yt={class:"timeline-info-config"},_t=V(()=>p("span",null,"名称：",-1)),wt={class:"timeline-info-config"},gt=V(()=>p("span",null,"地图：",-1)),bt={class:"timeline-info-config"},ht=V(()=>p("span",null,"职业：",-1)),vt={class:"timeline-info-config"},Ft=V(()=>p("span",null,"来源：",-1)),Tt={class:"timeline-info-config"},xt=V(()=>p("span",null,"创建：",-1)),Ct={style:{flex:"1"}},It={style:{"max-height":"353px"}},St={class:"timeline-timeline-view"},$t=V(()=>p("br",null,null,-1)),Vt=V(()=>p("br",null,null,-1)),Et=ge({__name:"timelineSettings",setup(S){const F=B(0),s=Se(),_=ye(s,"allTimelines"),W=ye(s,"filters"),j=[{id:"0",name:"任意"}],x=B(!1),N=B(!1),m=be({timeline:{name:"空",condition:{zoneId:"0",job:"NONE"},timeline:"空",codeFight:"空",create:"空"}}),e=location.href.includes("OVERLAY_WS="),$=B([]);f();async function z(){$.value=[{time:0,action:"正在加载...",show:!0,windowBefore:0,windowAfter:0,alertAlready:!0}],$.value=await Xe(m.timeline.timeline)}const ne=Re(_e(()=>R.getBattleJobs2()),500,{maxWait:5e3});ie();function ie(){var l,n,g;for(const E in ce)if(Object.prototype.hasOwnProperty.call(ce,E)){const k=ce[E];switch(k.contentType){case 4:case 5:case 28:j.push({id:E,name:((l=k.name)==null?void 0:l.cn)??((n=k.name)==null?void 0:n.ja)??((g=k.name)==null?void 0:g.ja)??E})}}v(),s.sortTimelines(),a()}function le(){ot({call:"broadcast",source:"soumuaTimelineSetting",msg:{store:s.$state}})}function J(){var l;(l=C({url:location.href}))!=null&&l.OVERLAY_WS?(le(),y.fire({title:"已尝试进行通信,请检查ACT悬浮窗是否接收",text:"若无法通信，可将本页面直接添加到ACT悬浮窗进行编辑，设置将会自动保存。（编辑后刷新一下时间轴网页）"})):y.fire({icon:"error",title:"目前与ACT断开了连接。",text:'请启用ACT OverlayPlugin WSServer，并使本页面url参数中的端口号与其保持一致：OVERLAY_WS=ws://127.0.0.1:端口号/ws"'})}function C({url:l}){var E,k;const n=(k=(E=l.split("?"))==null?void 0:E.pop())==null?void 0:k.split("&"),g={};if(n)for(const Q of n){const q=Q.split("=");g[q[0]]=q[1]}return g}function c(){x.value=!x.value,f()}function f(){F.value=-30,m.timeline={name:"空",condition:{zoneId:"0",job:"NONE"},timeline:"空",codeFight:"空",create:"空"}}function w(){m.timeline=s.allTimelines[s.newTimeline()],z()}function u(l){window.scrollTo({top:0,behavior:"smooth"}),m.timeline=l,z()}function h(l){y.fire({title:`确定要删除${l.name}吗？`,text:"这将无法撤回！",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确认删除",cancelButtonText:"取消"}).then(n=>{n.isConfirmed&&(f(),_.value.splice(_.value.findIndex(g=>g===l),1))})}function v(){s.loadTimelineSettings(),Reflect.deleteProperty(s.configValues,"refreshRateMs")}function a(){je(()=>{s.saveTimelineSettings()},{flush:"post"})}function D(l){const n=new ze(".export",{text:()=>JSON.stringify(l)});n.on("success",()=>{y.fire({position:"top-end",icon:"success",title:"复制成功，已写入剪切板。",showConfirmButton:!1,timer:1500}),n.destroy()}),n.on("error",()=>{y.fire("复制失败，请手动复制！",JSON.stringify([l])),n.destroy()})}function H(){y.fire({title:"输入导出的字符串",input:"text",returnInputValueOnDeny:!0,showDenyButton:!0,denyButtonText:"覆盖",showConfirmButton:!0,confirmButtonText:"追加",showCancelButton:!0,cancelButtonText:"放弃"}).then(l=>{if(l.isConfirmed||l.isDenied)try{l.isDenied?y.fire({title:"这将丢失目前拥有的所有数据，你确定要覆盖吗？",showConfirmButton:!1,showDenyButton:!0,denyButtonText:"确定覆盖",showCancelButton:!0,cancelButtonText:"取消"}).then(n=>{n.isDenied&&(s.allTimelines.length=0,s.allTimelines.push(...JSON.parse(l.value)),s.sortTimelines())}):(s.allTimelines.push(...JSON.parse(l.value)),s.sortTimelines())}catch(n){y.fire({icon:"error",title:"Oops...",text:n})}})}const oe=_e(()=>`${(F.value<0?"-":"")+(Array(2).join("0")+(Math.floor(F.value/60)+(F.value<0?1:0))).slice(-2)}:${(Array(2).join("0")+Math.floor(F.value%60)).slice(-2)}`);function se(){m.timeline.timeline=m.timeline.timeline.replaceAll(new RegExp("(?<=^|#\\s*)(?<time>[:：\\d.]+)","gm"),(l,n)=>/^\d+:\d+(?:\.\d{1,2})?$/.test(l.toString())?we.duration(`00:${l.toString()}`).as("seconds").toString():we.utc(Number.parseFloat(l.toString())*1e3).format("mm:ss.S"))}function K(){const l=lt.resolve({path:"/timelineHelp"}).href;window.open(l,"_blank")}return(l,n)=>{const g=ve,E=Je,k=ct,Q=Ze,q=Ge,me=qe,Y=Me,Ve=Le,Z=he,pe=Ie,fe=Ce,ae=xe,Ee=et,G=Fe,ke=Te,Ae=We,Ne=He,Be=Ke;return T(),A(Be,{class:"container"},{default:o(()=>[i(E,null,{default:o(()=>[i(g,{type:"primary",onClick:n[0]||(n[0]=r=>w())},{default:o(()=>[b(" 新建 ")]),_:1}),i(g,{onClick:n[1]||(n[1]=r=>c())},{default:o(()=>[b(" 从FFlogs导入 ")]),_:1}),i(g,{color:"#626aef",style:{color:"white"},onClick:n[2]||(n[2]=r=>N.value=!t(N))},{default:o(()=>[b(" 时间轴设置 ")]),_:1}),i(g,{onClick:n[3]||(n[3]=r=>H())},{default:o(()=>[b(" 导入 ")]),_:1}),i(g,{class:"export",onClick:n[4]||(n[4]=r=>D(t(_)))},{default:o(()=>[b(" 全部导出 ")]),_:1}),t(e)?(T(),A(g,{key:0,type:"success",onClick:n[5]||(n[5]=r=>J())},{default:o(()=>[b(" 通过WS发送到悬浮窗 ")]),_:1})):X("",!0),i(g,{onClick:n[6]||(n[6]=r=>K())},{default:o(()=>[b(" 查看语法 ")]),_:1})]),_:1}),i(Ne,null,{default:o(()=>[t(x)?(T(),A(k,{key:0,filters:t(W),onClearCurrentlyTimeline:f,onShowFFlogsToggle:n[7]||(n[7]=()=>x.value=!t(x)),onNewTimeline:t(s).newTimeline,onUpdateFilters:t(s).updateFilters},null,8,["filters","onNewTimeline","onUpdateFilters"])):X("",!0),ee(i(Y,{class:"box-card"},{default:o(()=>[i(me,{title:"时间轴参数",size:"small",border:""},{default:o(()=>[(T(!0),O(U,null,L(t(s).configValues,(r,I,M)=>(T(),A(q,{key:M,label:t(s).configTranslate[I],"label-align":"right",width:"16em"},{default:o(()=>[i(Q,{modelValue:t(s).configValues[I],"onUpdate:modelValue":re=>t(s).configValues[I]=re,min:0,step:.1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]),_:1}),ut,i(me,{size:"small",title:"时间轴样式",border:""},{default:o(()=>[(T(!0),O(U,null,L(t(s).showStyle,(r,I,M)=>(T(),A(q,{key:M,label:t(s).showStyleTranslate[I],"label-align":"right",width:"16em"},{default:o(()=>[i(Q,{modelValue:t(s).showStyle[I],"onUpdate:modelValue":re=>t(s).showStyle[I]=re,min:0,step:.01},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]),_:1})]),_:1},512),[[te,t(N)]]),mt,ee(i(Y,null,{default:o(()=>[p("div",pt,[ft,i(Ve,{modelValue:t(F),"onUpdate:modelValue":n[8]||(n[8]=r=>ue(F)?F.value=r:null),min:-30,max:1500,step:.1,"show-input":""},null,8,["modelValue"]),p("div",null,P(t(oe)),1)]),i(ae,{class:"timeline-info"},{default:o(()=>[p("div",null,[p("p",yt,[_t,i(Z,{modelValue:t(m).timeline.name,"onUpdate:modelValue":n[9]||(n[9]=r=>t(m).timeline.name=r),class:"timeline-info-name"},null,8,["modelValue"])]),p("p",wt,[gt,i(fe,{modelValue:t(m).timeline.condition.zoneId,"onUpdate:modelValue":n[10]||(n[10]=r=>t(m).timeline.condition.zoneId=r),filterable:""},{default:o(()=>[(T(),O(U,null,L(j,r=>i(pe,{key:r.id,label:r.name,value:r.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),p("p",bt,[ht,i(fe,{modelValue:t(m).timeline.condition.job,"onUpdate:modelValue":n[11]||(n[11]=r=>t(m).timeline.condition.job=r),required:"",placeholder:"职业"},{default:o(()=>[(T(!0),O(U,null,L(t(ne),r=>(T(),A(pe,{key:r,label:t(R).nameToFullName(r).cn,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),p("p",vt,[Ft,i(Z,{modelValue:t(m).timeline.codeFight,"onUpdate:modelValue":n[12]||(n[12]=r=>t(m).timeline.codeFight=r),disabled:""},null,8,["modelValue"])]),p("p",Tt,[xt,i(Z,{modelValue:t(m).timeline.create,"onUpdate:modelValue":n[13]||(n[13]=r=>t(m).timeline.create=r),disabled:""},null,8,["modelValue"])]),i(ae,{"m-b-10px":""},{default:o(()=>[i(g,{span:12,class:"export",onClick:n[14]||(n[14]=r=>D([t(m).timeline]))},{default:o(()=>[b(" 单独导出 ")]),_:1}),i(g,{type:"primary",span:12,onClick:n[15]||(n[15]=r=>se())},{default:o(()=>[b(" 切换时间 ")]),_:1})]),_:1}),i(ae,null,{default:o(()=>[i(g,{span:12,type:"danger",onClick:n[16]||(n[16]=r=>h(t(m).timeline))},{default:o(()=>[b(" 删除 ")]),_:1}),i(g,{span:12,onClick:n[17]||(n[17]=r=>f())},{default:o(()=>[b(" 隐藏编辑界面 ")]),_:1})]),_:1})]),p("div",Ct,[i(Z,{modelValue:t(m).timeline.timeline,"onUpdate:modelValue":n[18]||(n[18]=r=>t(m).timeline.timeline=r),class:"timeline-timeline-raw",type:"textarea",rows:12,wrap:"off",placeholder:"请键入时间轴文本",style:{"max-width":"569px"},onChange:n[19]||(n[19]=r=>z())},null,8,["modelValue"])]),p("div",It,[p("div",St,[i(Ee,{config:t(s).configValues,lines:t($),runtime:t(F),"show-style":t(s).showStyle},null,8,["config","lines","runtime","show-style"])])])]),_:1}),$t]),_:1},512),[[te,t(m).timeline.create!=="空"]]),Vt,t(_).length>0?(T(),A(Y,{key:1},{default:o(()=>[i(ke,{data:t(_),style:{width:"100%"},stripe:""},{default:o(()=>[i(G,{prop:"name",label:"名称"}),i(G,{prop:"conditon",label:"地图",sortable:""},{default:o(r=>{var I;return[b(P((I=j.find(M=>M.id===r.row.condition.zoneId))==null?void 0:I.name),1)]}),_:1}),i(G,{prop:"conditon",label:"职业"},{default:o(r=>[b(P(t(R).nameToFullName(r.row.condition.job).cn),1)]),_:1}),i(G,{fixed:"right",label:"操作",width:"100"},{default:o(r=>[i(g,{type:"primary",size:"small",onClick:I=>u(r.row)},{default:o(()=>[b(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):X("",!0),t(_).length===0?(T(),A(Y,{key:2},{default:o(()=>[i(Ae,{description:"点击上方新建或导入一个时间轴吧~"})]),_:1})):X("",!0)]),_:1})]),_:1})}}});const Rt=$e(Et,[["__scopeId","data-v-9b35a0df"]]);export{Rt as default};
