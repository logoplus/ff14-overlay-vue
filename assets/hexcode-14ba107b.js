import{d as J,A as u,C as K,a0 as B,o as F,b as y,h as b,at as A,u as n,g as a,a3 as k,I as w,t as i,J as X,K as O,aJ as R,p as W,l as j,S as q}from"./vendor-5d3cd767.js";import{_ as G}from"./index-b002a104.js";const L=d=>(W("data-v-0c6962af"),d=d(),j(),d),P=L(()=>a("h2",null,"UTF8长度计算",-1)),Q=L(()=>a("h2",null,i("指令码检测（不包括FFXX>）"),-1)),Y=["innerHTML"],Z=J({__name:"hexcode",setup(d){const p=u(""),h=u(""),g=u(0),v=u(0),o=K("hexcode",""),x=u([]),S=u("");B(()=>{g.value=_(p.value),v.value=_(h.value),S.value=(g.value-v.value).toString(16).toUpperCase()});function _(t){let e=0;for(let l=0;l<t.length;l++){const s=t.charCodeAt(l);s<128?e+=1:s<2048?e+=2:s<65536?e+=3:s<2097152&&(e+=4)}return e}function V(t){let e=0;const l=[];for(;e<t.length;){const s=t.indexOf("<hex:02",e);if(s===-1||(e=s+1,t.slice(e-1,e+9)==="<hex:0203>"))break;const M=t.slice(e+6,e+8),I=t.slice(e+8,e+10),T=Number.parseInt(I,16),N=`指令${M} 长度${I}(${T})`;let r=0,U=0,m=!0,f=!0;for(;U<T;r++){const c=t[s+r+11],D=t.slice(s+r+11,s+r+11+5);if(c===void 0)break;if(c==="<"&&(m=!0,f=!1),!(m&&!f)){if(!(c===">"&&f)){if(!(c==="<"&&D==="<hex:")){const C=_(c);U+=m?C/2:C}}}c===":"&&(f=!0),c===">"&&(m=!1,f=!1)}const $=t.slice(e+r+3,e+r+11),z=t.slice(e+10,e+10+r);l.push({passed:$.endsWith("03>"),over:$,msg:N,full:z})}return l}B(()=>{x.value.length=0,o.value.split(`
`).forEach(t=>{const e=V(t);x.value.push(...e)})});function E(t){return t.replaceAll("<hex:024804F201F803><hex:024904F201F903>",'<span style="color:#00cc22;">').replaceAll("<hex:024804F201FA03><hex:024904F201FB03>",'<span style="color:#ffff66;">').replaceAll("<hex:0249020103><hex:0248020103>","</span>").replaceAll("<hex:02100103>","<br>").replaceAll("<hex:024804F201F403><hex:024904F201F503>",'<span style="color:#ff7b1a;">').replaceAll(/(<)(hex:[^>]+)(>)/g,"&lt;$2&gt;")}function H(){R(()=>{o.value=o.value.replaceAll(/\n/g,"<hex:02100103>")})}return(t,e)=>(F(),y("main",null,[P,b(a("textarea",{id:"","onUpdate:modelValue":e[0]||(e[0]=l=>k(p)?p.value=l:null),name:"",cols:"100",rows:"1"},null,512),[[A,n(p)]]),w(" "+i(n(g))+" ",1),b(a("textarea",{id:"","onUpdate:modelValue":e[1]||(e[1]=l=>k(h)?h.value=l:null),name:"",cols:"100",rows:"1"},null,512),[[A,n(h)]]),w(" "+i(n(v))+" ",1),a("p",null,"UTF8长度差异（十六进制）："+i(n(S)),1),Q,a("div",{style:{"min-height":"2em",height:"100%",width:"35em",border:"1px solid #ccc",padding:"0.5em","background-color":"#333",color:"white","font-family":"'宋体'","font-size":"16px"},innerHTML:E(n(o))},null,8,Y),b(a("textarea",{id:"","onUpdate:modelValue":e[2]||(e[2]=l=>k(o)?o.value=l:null),"m-b-2":"","m-t-2":"",name:"",cols:"100",rows:"5",onKeyup:H},null,544),[[A,n(o)]]),a("article",null,[w(i(n(x).every(l=>l.passed)?"02开头指令全部通过":"有错误")+" ",1),a("ul",null,[(F(!0),y(X,null,O(n(x),(l,s)=>(F(),y("li",{key:s},[a("span",{style:q({color:l.passed?"black":"red"})},i(`${l.passed?"通过":"错误"} ${l.msg} ${l.full}`),5)]))),128))])])]))}});const se=G(Z,[["__scopeId","data-v-0c6962af"]]);export{se as default};
